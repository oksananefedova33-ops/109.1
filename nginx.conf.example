# Nginx конфигурация для экспортированного сайта
# Добавьте эти правила в блок server {} вашей конфигурации

# Убираем .html из URL
location / {
    try_files $uri $uri.html $uri/ =404;
}

# Редирект с .html на без .html
location ~ \.html$ {
    if ($request_uri ~ ^(.*)\.html$) {
        return 301 $1;
    }
}

# Кеширование статических файлов
location ~* \.(jpg|jpeg|png|gif|webp|ico|css|js)$ {
    expires 30d;
    add_header Cache-Control "public, immutable";
}

# Сжатие
gzip on;
gzip_comp_level 6;
gzip_types text/plain text/css text/xml text/javascript application/javascript application/json application/xml+rss;
gzip_vary on;

# Защита от доступа к служебным файлам
location ~ /\. {
    deny all;
}

location ~ \.(htaccess|htpasswd|ini|log|sh)$ {
    deny all;
}